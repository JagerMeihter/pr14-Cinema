<Page x:Class="pr14_Cinema.Views.BookingPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Оформление билета">

    <Grid Background="#FFF5F5F5">
        <ScrollViewer>
            <StackPanel Margin="20">
                <!-- Кнопка назад -->
                <Button Content="← Назад к выбору мест" 
                        Click="BackButton_Click"
                        Background="Transparent" 
                        Foreground="#666666"
                        BorderThickness="0"
                        HorizontalAlignment="Left"
                        Margin="0,0,0,20"
                        Padding="0" Cursor="Hand"/>

                <!-- Основная информация -->
                <Border Background="White" Padding="30" CornerRadius="10">
                    <StackPanel>
                        <TextBlock Text="Подтверждение заказа" 
                                   FontSize="24" FontWeight="Bold"
                                   Margin="0,0,0,30"/>

                        <!-- Информация о сеансе -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" 
                                Padding="0,0,0,20" Margin="0,0,0,20">
                            <StackPanel>
                                <TextBlock Text="Информация о сеансе:" 
                                           FontSize="18" FontWeight="Bold"
                                           Margin="0,0,0,10"/>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" 
                                               Text="Фильм:" FontWeight="Bold"
                                               Margin="0,0,10,5"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" 
                                               x:Name="MovieText" FontSize="14"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" 
                                               Text="Дата и время:" FontWeight="Bold"
                                               Margin="0,10,10,5"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" 
                                               x:Name="DateTimeText" FontSize="14" Margin="0,10,0,5"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" 
                                               Text="Зал:" FontWeight="Bold"
                                               Margin="0,10,10,5"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" 
                                               x:Name="HallText" FontSize="14" Margin="0,10,0,5"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" 
                                               Text="Цена билета:" FontWeight="Bold"
                                               Margin="0,10,10,5"/>
                                    <TextBlock Grid.Row="3" Grid.Column="1" 
                                               x:Name="TicketPriceText" FontSize="14" Margin="0,10,0,5"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Выбранные места -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" 
                                Padding="0,0,0,20" Margin="0,0,0,20">
                            <StackPanel>
                                <TextBlock Text="Выбранные места:" 
                                           FontSize="18" FontWeight="Bold"
                                           Margin="0,0,0,10"/>

                                <ItemsControl x:Name="SelectedSeatsList" Margin="0,0,0,10">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" 
                                                    Padding="10,5">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Width="150">
                                                        <Run Text="Ряд "/>
                                                        <Run Text="{Binding Row}"/>
                                                        <Run Text=", Место "/>
                                                        <Run Text="{Binding Number}"/>
                                                    </TextBlock>
                                                    <TextBlock Width="100">
                                                        <Run Text="Тип: "/>
                                                        <Run Text="{Binding Type}"/>
                                                    </TextBlock>
                                                    <TextBlock Width="100" HorizontalAlignment="Right">
                                                        <Run Text="{Binding Price, StringFormat={}{0}₽}"/>
                                                    </TextBlock>
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <!-- Итоговая стоимость -->
                                <Border Background="#E8F5E8" Padding="15" CornerRadius="5">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <TextBlock Text="Итого:" FontSize="18" FontWeight="Bold"/>
                                        <TextBlock x:Name="TotalPriceText" 
                                                   FontSize="24" FontWeight="Bold" 
                                                   Foreground="Green" Margin="10,0,0,0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>

                        <!-- Контактная информация -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" 
                                Padding="0,0,0,20" Margin="0,0,0,30">
                            <StackPanel>
                                <TextBlock Text="Контактная информация:" 
                                           FontSize="18" FontWeight="Bold"
                                           Margin="0,0,0,15"/>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" 
                                               Text="Имя:" FontWeight="Bold"
                                               Margin="0,0,10,10"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" 
                                               x:Name="UserNameText" FontSize="14" Margin="0,0,0,10"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" 
                                               Text="Email:" FontWeight="Bold"
                                               Margin="0,0,10,10"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" 
                                               x:Name="UserEmailText" FontSize="14" Margin="0,0,0,10"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" 
                                               Text="Телефон:" FontWeight="Bold"
                                               Margin="0,0,10,5"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" 
                                               x:Name="UserPhoneText" FontSize="14" Margin="0,0,0,5"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Кнопки подтверждения -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Content="Отмена" Click="CancelButton_Click"
                                    Background="#FFE0E0E0" Foreground="#333333"
                                    Padding="20,10" Margin="0,0,20,0"
                                    FontSize="14" Cursor="Hand"/>

                            <Button Content="✅ Подтвердить и оплатить" 
                                    Click="ConfirmButton_Click"
                                    Background="#FF4CAF50" Foreground="White"
                                    Padding="25,12" FontSize="16" FontWeight="Bold"
                                    Cursor="Hand">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#45a049"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>